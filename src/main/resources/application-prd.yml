# Configurações para ambiente de PRODUÇÃO
spring:
  config:
    activate:
      on-profile: prd
  
  # Banco de Dados - Produção
  datasource:
    url: ${DB_URL:jdbc:oracle:thin:@10.10.0.14:1521:TASY}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: oracle.jdbc.OracleDriver
    hikari:
      maximum-pool-size: ${DB_POOL_SIZE:20}
      minimum-idle: ${DB_MIN_IDLE:10}
      connection-timeout: ${DB_CONNECTION_TIMEOUT:30000}
      idle-timeout: ${DB_IDLE_TIMEOUT:600000}
      max-lifetime: ${DB_MAX_LIFETIME:1800000}
      leak-detection-threshold: ${DB_LEAK_DETECTION:60000}
  
  # JPA - Produção
  jpa:
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        generate_statistics: false
        jdbc:
          batch_size: 30
          batch_versioned_data: true
        order_inserts: true
        order_updates: true

# Configurações da API OdontoPrev - Produção
odontoprev:
  api:
    # URLs da API de produção
    base-url: ${ODONTOPREV_BASE_URL:https://apim.odontoprev.com.br}
    base-url-auth: ${ODONTOPREV_AUTH_URL:https://apim.odontoprev.com.br}
    base-url-login: ${ODONTOPREV_LOGIN_URL:https://apim.odontoprev.com.br}
    path: ${ODONTOPREV_API_PATH:/empresa/2.0}
    
    # Token OAuth2 para produção (Basic auth para client credentials)
    # Endpoint: https://apim.odontoprev.com.br/oauth2/token
    app-token: ${ODONTOPREV_APP_TOKEN:Zk5wMWNaaElLaEVSdkdfTHd1RDRhOVdoRW5jYTpqdWZVSFpBRF80bEdtM0FvRmxrSGxIQmZCNGth}
    
    # Credenciais para Login Empresa (segundo passo da autenticação)
    # Endpoint: https://apim.odontoprev.com.br/empresa-login/1.0/api/auth/token
    login:
      app-id: ${ODONTOPREV_LOGIN_APPID:ODPV}
      usuario: ${ODONTOPREV_LOGIN_USUARIO:14351525}
      senha: ${ODONTOPREV_LOGIN_SENHA:SabinSin@i2025}
    
    # Configurações de usuário (manter compatibilidade)
    user:
      login: ${ODONTOPREV_USER_LOGIN:14351525}
      senha: ${ODONTOPREV_USER_SENHA:SabinSin@i2025}
      appid: ${ODONTOPREV_USER_APPID:ODPV}
  
  # Configurações de credenciais (manter compatibilidade)
  credentials:
    token: ${ODONTOPREV_CREDENTIALS_TOKEN:Zk5wMWNaaElLaEVSdkdfTHd1RDRhOVdoRW5jYTpqdWZVSFpBRF80bEdtM0FvRmxrSGxIQmZCNGth}
    empresa: ${ODONTOPREV_CREDENTIALS_EMPRESA}
    usuario: ${ODONTOPREV_CREDENTIALS_USUARIO:14351525}
    senha: ${ODONTOPREV_CREDENTIALS_SENHA:SabinSin@i2025}
    app-id: ${ODONTOPREV_CREDENTIALS_APPID:ODPV}

# Logging específico para produção
logging:
  level:
    root: WARN
    com.odontoPrev: INFO
    org.springframework.web: WARN
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
    feign: WARN
  
  # Configuração de arquivo de log para produção
  file:
    name: ${LOG_FILE_PATH:/var/log/odontoprev/application.log}
    max-size: ${LOG_FILE_MAX_SIZE:10MB}
    max-history: ${LOG_FILE_MAX_HISTORY:30}
  
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %level - [%thread] - %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} - %level - [%thread] - %logger{36} - %msg%n"

# Configurações de segurança adicionais para produção
server:
  error:
    include-message: never
    include-stacktrace: never
    include-exception: false
  
  # Configurações de compressão
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain
    min-response-size: 1024
