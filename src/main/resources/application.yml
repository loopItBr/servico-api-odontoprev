# Configurações comuns para todos os ambientes
spring:
  application:
    name: servico-api-odontoprev
  
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.OracleDialect
        format_sql: true
        jdbc:
          batch_size: 20
    open-in-view: false

# Configurações do servidor
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: ${SERVER_CONTEXT_PATH:/}
  
# Configurações de logging
logging:
  level:
    root: ${LOG_LEVEL:INFO}
    com.odontoPrev: ${LOG_LEVEL_APP:DEBUG}
    org.springframework.web: ${LOG_LEVEL_WEB:INFO}
    org.hibernate.SQL: ${LOG_LEVEL_SQL:INFO}
    org.hibernate.type.descriptor.sql.BasicBinder: ${LOG_LEVEL_SQL_PARAMS:INFO}

# Configurações do Feign Client
feign:
  client:
    config:
      default:
        connectTimeout: ${FEIGN_CONNECT_TIMEOUT:10000}
        readTimeout: ${FEIGN_READ_TIMEOUT:60000}
        loggerLevel: ${FEIGN_LOG_LEVEL:BASIC}

# Configurações do Scheduler
spring.task.scheduling:
  pool:
    size: ${SCHEDULER_POOL_SIZE:10}

# Configurações do Jackson
spring.jackson:
  serialization:
    write-dates-as-timestamps: false
  deserialization:
    fail-on-unknown-properties: false
  time-zone: America/Sao_Paulo

# Configurações dos Schedulers OdontoPrev
odontoprev:
  # Configurações de API (URLs e paths)
  api:
    base-url: ${ODONTOPREV_BASE_URL:https://apim-hml.odontoprev.com.br}
    base-url-auth: ${ODONTOPREV_AUTH_URL:https://apim-hml.odontoprev.com.br}
    # URL base específica para fluxo de beneficiários (padrão: mesma do base-url)
    base-url-beneficiario: ${ODONTOPREV_BASE_URL_BENEFICIARIO:${ODONTOPREV_BASE_URL:https://apim-hml.odontoprev.com.br}/cadastroonline-pj/1.0}
    path: ${ODONTOPREV_API_PATH:/cadastroonline-pj/1.0}
    codigo-grupo-gerencial: ${ODONTOPREV_CODIGO_GRUPO_GERENCIAL:787392}

    # Token OAuth2 (Basic auth para client credentials)
    app-token: ${ODONTOPREV_APP_TOKEN:X2JlUWZkMW5PTnE5WWpyYVZwZkl5N2J0eVhJYTpCV25wMURLMlJkeXowYXNBVXU2QkFkSUdnM01h}

    # Credenciais para Login Empresa (segundo passo da autenticação)
    login:
      app-id: ${ODONTOPREV_LOGIN_APPID:ODPV}
      usuario: ${ODONTOPREV_LOGIN_USUARIO:13433638}
      senha: ${ODONTOPREV_LOGIN_SENHA:gWZ84t1NCX3a}

    # Credenciais para headers específicos (manter compatibilidade)
    empresa: ${ODONTOPREV_CREDENTIALS_EMPRESA:787392}
    usuario: ${ODONTOPREV_CREDENTIALS_USUARIO:13433638}
    senha: ${ODONTOPREV_CREDENTIALS_SENHA:gWZ84t1NCX3a}
    app-id: ${ODONTOPREV_CREDENTIALS_APPID:ODPV}

    user:
      login: ${ODONTOPREV_USER_LOGIN:13433638}
      senha: ${ODONTOPREV_USER_SENHA:gWZ84t1NCX3a}
      appid: ${ODONTOPREV_USER_APPID:ODPV}

  # Configurações de credenciais (padrão antigo mantido para compatibilidade)
  credentials:
    token: ${ODONTOPREV_CREDENTIALS_TOKEN:X2JlUWZkMW5PTnE5WWpyYVZwZkl5N2J0eVhJYTpCV25wMURLMlJkeXowYXNBVXU2QkFkSUdnM01h}
    empresa: ${ODONTOPREV_CREDENTIALS_EMPRESA:787392}
    usuario: ${ODONTOPREV_CREDENTIALS_USUARIO:13433638}
    senha: ${ODONTOPREV_CREDENTIALS_SENHA:gWZ84t1NCX3a}
    app-id: ${ODONTOPREV_CREDENTIALS_APPID:ODPV}

  scheduler:
    empresa:
      enabled: true
    beneficiario:
      enabled: true

  sync:
    # Configurações para processamento de empresas
    batch-size: ${ODONTOPREV_SYNC_BATCH_SIZE:50}
    max-threads: ${ODONTOPREV_SYNC_MAX_THREADS:5}

    # Configurações para processamento de beneficiários
    beneficiario:
      batch-size: ${ODONTOPREV_SYNC_BENEFICIARIO_BATCH_SIZE:50}
      max-threads: ${ODONTOPREV_SYNC_BENEFICIARIO_MAX_THREADS:5}